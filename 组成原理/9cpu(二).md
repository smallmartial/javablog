## 1.cpu的结构

### 1.1cpu的功能

- 控制器的功能
  - 取指令
  - 分析指令
  - 执行指令，发出各种操做命令
  - 控制程序输入及结果的输出
  - 总线管理
  - 处理异常情况和特殊情况
- 运算器的功能
  - 实现算术运算和逻辑运算

### 1.2cpu结构框图

- cpu与系统总线

  ![image-20200420115624041](9cpu(%E4%BA%8C)/image-20200420115624041.png)

- cpu的寄存器

  - 用户可见寄存器

    通用寄存器

    数据寄存器

    地址寄存器

    条件码寄存器

  - 控制和状态寄存器

    - 控制寄存器

      ![image-20200420115941504](9cpu(%E4%BA%8C)/image-20200420115941504.png)

    - 状态寄存器

      ![image-20200420120012373](9cpu(%E4%BA%8C)/image-20200420120012373.png)

### 1.3控制单元CU和中断系统

- CU  产生全部指令的微操作命令序列

  组合逻辑设计

  微程序设计

- 中断系统

## 2.指令周期

### 2.1概念

- 指令周期

  取出并执行一条指令所需的全部时间

  ![image-20200420120423504](9cpu(%E4%BA%8C)/image-20200420120423504.png)

- 每条指令的指令周期不同

- 具有间接寻址的指令周期

  ![image-20200420120639847](9cpu(%E4%BA%8C)/image-20200420120639847.png)

- 具有中断指令的周期

  ![image-20200420120715222](9cpu(%E4%BA%8C)/image-20200420120715222.png)

- 指令周期的流程

  ![image-20200420120822439](9cpu(%E4%BA%8C)/image-20200420120822439.png)

- CPU工作周期的标志

  - cpu访存有四种性质

    ![image-20200420120938295](9cpu(%E4%BA%8C)/image-20200420120938295.png)

- 指令周期的数据流

  - 取指周期数据流

    ![image-20200420130438274](9cpu(%E4%BA%8C)/image-20200420130438274.png)
  
  - 间址周期数据流

    ![image-20200420130614938](9cpu(%E4%BA%8C)/image-20200420130614938.png)

  - 执行周期数据流
  
  - 中断周期数据流
  
    ![image-20200420130834071](9cpu(%E4%BA%8C)/image-20200420130834071.png)
  
    
  

## 3.指令流水

### 3.1如果提高速度

- 提高访问速度（高速芯片  Cache 多体并行）
- 提高IO和主机之间的传送方式

  - 中断
  - DMA
  - 通道
  - I/O处理机
- 提高运算器速度

### 3.2系统的并行性

- 并行

  ![image-20200420131157438](9cpu(%E4%BA%8C)/image-20200420131157438.png)

- 并行性的等级

  - 过程级 粗粒度
  - 指令集 细粒度

### 3.3指令流水原理

- 指令的串行执行

- 指令的二级流水

  ![image-20200420131705237](9cpu(%E4%BA%8C)/image-20200420131705237.png)

- 影响指令流水效率加倍因素

  ![image-20200420131938637](9cpu(%E4%BA%8C)/image-20200420131938637.png)

### 3.4影响指令流水性能因素

- 结构相关 不同指令正用同一个功能部件产生资源冲突

  ![image-20200420132238708](9cpu(%E4%BA%8C)/image-20200420132238708.png)

- 数据相关

  不同指令因重叠，改变操作数读写顺序

  - 写后读
  - 读后写
  - 写后写

- 控制相关

### 3.5流水线性能

- 吞吐率（单位时间内流水线所完成指令或输出结果的数量）

  - 最大吞吐率
  - 实际吞吐率
  - 实际吞吐率

- 加速比Sp

  ![image-20200420133029058](9cpu(%E4%BA%8C)/image-20200420133029058.png)

- 效率

### 3.6流水线的多发技术

- 超标量技术
- 超流水技术
- 超长指令字技术

###   3.7流水线的多发技术

- 指令流水结构

  ![image-20200420134251129](9cpu(%E4%BA%8C)/image-20200420134251129.png)

  



