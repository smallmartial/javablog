# 高速缓存存储器

## 1.概述

- 为什么要用Cache

  - 避免CPU空等现象

  - CPU和主存的速度存在差异

    ![image-20200415180634763](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415180634763.png)

- 程序访问的局部性原理

  - 时间的局部性
  - 空间的局部性

- Cache的工作原理

  - 主存和缓存的编址

    ![image-20200415180922395](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415180922395.png)

  - 命中与未命中

    ![image-20200415181158493](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415181158493.png)

  - Cache的命中率

    - 命中率与缓存的容量与块长有关
    - 一般每块取4~8字节
    - 块长取一个存储周期内从主存调出信息长度
    
  - Cache-主存系统的效率
  
    ![image-20200415181617042](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415181617042.png)

- Cache的基本结构

  ![image-20200415181909800](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415181909800.png)

- Cache的读操作

  ![image-20200415182147066](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415182147066.png)

- Cache的写操作

  - 写直达法

    ![image-20200415182300373](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415182300373.png)

  - 写回法

     ![image-20200415182314857](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415182314857.png)

- Cache的改进

  - 增加Cache的级数
    - 片内Cache
    - 片外Cache
  - 统一缓存和分立缓存
    - 指令Cache
    - 数据Cache


## 2.Cache-主存的地址映射

- 直接映射

  ![image-20200415182653121](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415182653121.png)

- 全相连映射

  ![image-20200415183056046](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415183056046.png)

- 组相联映射

  ![image-20200415183210472](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415183210472.png)

## 3.替换算法

- 先进先出算法

- LRU最近最少使用算法

  ![image-20200415183843924](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415183843924.png)

## 4.辅助存储器

- 特点

  不直接与CPU交换信息

- 此表面存储器的技术指标

  ![image-20200415184206135](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415184206135.png)

- 磁记录原理

- 硬磁盘存储器

  - 硬磁盘存储类型

    - 固定磁头和移动磁头
    - 可幻盘和固定盘

  - 硬磁盘存储器结构

    ![image-20200415184434200](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415184434200.png)

  - 磁盘驱动器

    ![image-20200415184505553](4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/image-20200415184505553.png)