## 1.简单动态字符串

- Redis没有直接使用C语言的字符串进行表示，而是自己构建一个简单的动态字符串。
- 键值对在底层都有SDS实现。

### 1.1SDS的定义

![image-20200228163221394](%E7%AC%AC%E4%B8%80%E7%AB%A0/image-20200228163221394.png)

- SDS在len属性中记录了SDS本身的长度，所以SDS的时间复制度为O(1)
- 设置和更新SDS长度都是有SDS的API自动完成
- 保证了获取字符串长度问题不会成为Redis的性能瓶颈
- SDS可以杜绝内存的溢出
- 兼容部分C字符函数
- 二进制安全
- 减少修改字符串长度时所需的内存重分配次数

### 1.2SDS可以减少修改字符串时带来的内存重分配次数

- SDS通过未使用空间解除了字符串长度和底层数组长度之间的关联
- SDS中 buf数组的长度不一定就是字符数量加一，数组里面包含未使用的字节这些字节的数量有SDS的free属性进行记录。
- SDS实现了``空间预分配``和``惰性空间释放``两种优化策略。

### 1.3总结

![image-20200228201326439](%E7%AC%AC%E4%B8%80%E7%AB%A0/image-20200228201326439.png)